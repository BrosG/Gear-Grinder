<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>GEAR GRINDER — MULTIPLAYER EDITION | Powered by flowky.ai</title>
<meta name="description" content="3D multiplayer downhill cycling racing game. Race with up to 10 players. Powered by flowky.ai">
<meta property="og:title" content="Gear Grinder — Multiplayer Edition">
<meta property="og:description" content="Race your friends in this 3D cycling game! Up to 10 players per room.">
<meta property="og:type" content="website">

<!-- Dependencies -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js"></script>
<link rel="stylesheet" href="css/style.css">
</head>
<body>

<!-- FLOWKY.AI BANNER -->
<a id="flowky-banner" href="https://flowky.ai" target="_blank" rel="noopener">
  <span class="flowky-dot"></span>
  <span>POWERED BY</span>
  <span class="flowky-logo">FLOWKY.AI</span>
  <span class="flowky-dot"></span>
</a>

<!-- OVERLAY LAYERS -->
<div id="vignette"></div>
<div id="terrain-tint"></div>
<div id="speed-lines"></div>
<div id="flash-overlay"></div>
<div id="shift-flash"></div>
<div id="shift-hint"></div>

<!-- ============================================================ -->
<!-- START SCREEN -->
<!-- ============================================================ -->
<div id="start-screen">
  <div class="bg-grid"></div>
  <div class="bg-glow"></div>
  <div id="start-content">
    <h1>GEAR GRINDER</h1>
    <div class="start-edition">MULTIPLAYER EDITION</div>

    <!-- Room Browser -->
    <div class="room-section">
      <div class="room-section-title">ACTIVE ROOMS</div>
      <div class="room-list" id="room-list">
        <div class="room-empty">SCANNING FOR ROOMS...</div>
      </div>
    </div>

    <div class="or-divider">OR CREATE / JOIN</div>

    <!-- Room Input -->
    <div class="room-create">
      <input type="text" id="room-input" class="room-input" placeholder="ROOM NAME" value="RACE1" maxlength="16">
    </div>

    <!-- Controls Guide -->
    <div class="start-controls">
      <span class="key">SPACE / TAP</span><span>Pedal — rhythm is everything</span>
      <span class="key">&uarr; &darr; / SCROLL</span><span>Shift through 12 gears</span>
      <span class="key">&larr; &rarr; / SWIPE</span><span>Dodge obstacles &amp; grab powerups</span>
      <div class="sep"></div>
      <span class="key">&#9889;&#128293;&#10024;&#129718;</span><span>Energy &middot; Speed &middot; Score &middot; Gravity</span>
      <div class="start-tip">UP TO 10 PLAYERS PER ROOM</div>
    </div>

    <button id="start-btn">ENTER LOBBY</button>
  </div>
</div>

<!-- ============================================================ -->
<!-- LOBBY SCREEN -->
<!-- ============================================================ -->
<div id="lobby-screen">
  <div class="lobby-header">MULTIPLAYER LOBBY</div>
  <div class="lobby-room-code" id="lobby-room-display">ROOM: RACE1</div>
  <div class="lobby-player-count" id="lobby-player-count">1/10 RIDERS</div>
  <div class="lobby-list" id="lobby-list">
    <!-- Players populate here -->
  </div>
  <div class="lobby-actions">
    <button id="lobby-start-btn">START RACE</button>
    <button id="lobby-share-btn">INVITE</button>
  </div>
  <div class="lobby-wait-msg">ANYONE CAN START THE RACE</div>
</div>

<!-- ============================================================ -->
<!-- COUNTDOWN -->
<!-- ============================================================ -->
<div id="countdown-overlay">3</div>

<!-- ============================================================ -->
<!-- GAME OVER -->
<!-- ============================================================ -->
<div id="go-screen">
  <div class="go-new" id="go-new" style="display:none">&#9733; NEW RECORD &#9733;</div>
  <h2>WIPEOUT</h2>
  <div class="go-grade-wrap">
    <div class="go-grade-label">PERFORMANCE</div>
    <div class="go-grade-val" id="go-grade">A</div>
  </div>
  <div class="go-grid">
    <div class="go-stat">DISTANCE<strong id="go-dist">0</strong></div>
    <div class="go-stat">MAX SPEED<strong id="go-maxspd">0</strong></div>
    <div class="go-stat">PERFECTS<strong id="go-perfect">0</strong></div>
    <div class="go-stat">CLIFFS<strong id="go-cliffs">0</strong></div>
    <div class="go-stat">TOP GEAR<strong id="go-topgear">1</strong></div>
    <div class="go-stat">BEST COMBO<strong id="go-combo">0</strong></div>
  </div>
  <div class="go-score" id="go-score">0</div>
  <div class="go-hs" id="go-hs">HIGH SCORE: 0</div>
  <div class="go-btns">
    <button class="go-btn" id="retry-btn">RETRY</button>
    <button class="go-btn" id="share-btn">SHARE SCORE</button>
    <button class="go-btn" id="go-share-room-btn">INVITE FRIENDS</button>
  </div>
</div>

<!-- ============================================================ -->
<!-- IN-GAME HUD -->
<!-- ============================================================ -->
<div id="hud">
  <div class="hud-score">
    <div class="hud-score-label">SCORE</div>
    <div class="hud-score-val" id="h-score">0</div>
    <div id="combo-bar">COMBO &times;1</div>
  </div>
  <div id="powerup-status">
    <span class="pu-icon" id="pu-icon"></span>
    <span class="pu-label" id="pu-label"></span>
    <span class="pu-timer" id="pu-timer"></span>
  </div>
  <div class="hud-dist">
    <div class="hud-dist-val" id="h-dist">0</div>
    <div class="hud-dist-unit">METERS</div>
  </div>
  <div class="hud-best">
    <div class="hud-best-label">BEST</div>
    <div class="hud-best-val" id="h-best">0</div>
  </div>
  <!-- Multiplayer Leaderboard -->
  <div id="mp-leaderboard"></div>
  <div class="hud-speed">
    <div class="hud-speed-val" id="h-speed">0</div>
    <div class="hud-speed-unit">KM/H</div>
  </div>
  <div class="hud-gear">
    <div class="hud-gear-label">GEAR</div>
    <div class="hud-gear-val" id="h-gear">1</div>
    <div class="hud-gear-name" id="h-gname">EASY</div>
  </div>
  <div class="hud-incline">
    <div class="hud-incline-label">GRADIENT</div>
    <div class="hud-incline-val" id="h-incline">0%</div>
  </div>
  <div class="hud-rpm-wrap">
    <div class="hud-rpm-text">R P M</div>
    <div class="hud-rpm-bar">
      <div class="hud-rpm-redline"></div>
      <div class="hud-rpm-fill" id="rpm-fill"></div>
      <div class="hud-rpm-sweet" id="rpm-sweet"></div>
    </div>
  </div>
  <div class="hud-energy-wrap">
    <div class="hud-energy-bar" id="energy-bar-el">
      <div class="hud-energy-fill" id="energy-fill"></div>
    </div>
    <div class="hud-energy-text">E N R G Y</div>
  </div>
  <div class="hud-pedal-ring">
    <svg class="pedal-ring-svg" viewBox="0 0 100 100">
      <circle class="pedal-ring-bg" cx="50" cy="50" r="44"/>
      <circle class="pedal-ring-ideal" id="pedal-ideal-arc" cx="50" cy="50" r="44"
              stroke-dasharray="276.5" stroke-dashoffset="220" transform="rotate(-90 50 50)"/>
      <circle class="pedal-ring-progress" id="pedal-progress" cx="50" cy="50" r="44"
              stroke-dasharray="276.5" stroke-dashoffset="276.5" transform="rotate(-90 50 50)"/>
    </svg>
    <div class="pedal-btn-inner" id="pedal-btn">PEDAL</div>
  </div>
  <div id="float-text"></div>
  <div id="cliff-warn">&#9888; CLIFF AHEAD &#9888;</div>
  <div id="zone-banner">
    <div class="zone-name" id="z-name"></div>
    <div class="zone-sub" id="z-sub"></div>
  </div>
</div>

<!-- TOAST -->
<div id="toast"></div>

<!-- Three.js + Game Modules -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script type="module" src="js/app.js"></script>
</body>
</html>
